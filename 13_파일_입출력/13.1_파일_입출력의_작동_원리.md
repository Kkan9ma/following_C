# 13.1 파일 입출력의 작동 원리


## 프로그램을 실행할 때 벌어지는 일

<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter13/file1.png?raw=true">

* 실행
    - 스트림(데이터가 왔다갔다 하는 통로)이 3개 열림.
        - stdout, stderr, stdin
        - ex) printf, , scanf
        - err: stdout과 거의 동일하나, 긴급하게 출력.
    - 방향 재지정
    - 버퍼: 1비트 1비트, 1글자 1글자가 아니라 효율적 처리를 위해 한꺼번에 보내는 방식.
    - 파일
        - 파일 스트림
        - 파일 입출력을 일종의 스트림으로 다룸.

* 운영체제의 역할
    - C언어에서 일관되게 처리되도록 도움.
    - 작성한 프로그램 역시 결국엔 운영체제와 영향을 주고 받으며 실행.

## 파일
<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter13/file2.png?raw=true">

* c언어로 작성된 프로그램이 파일에 데이터를 저장하거나, 파일로부터 데이터를 읽어올 땐 두 가지 모드를 사용한다.
    - 텍스트 파일 IO 스트림
        - 텍스트 파일의 용도: 보통 사람들도 바로 읽도록.
    - 바이너리 파일 IO 스트림
        - 컴퓨터의 언어는 이진수.
        - 이를 직접 저장.
        - 사람이 직접 읽을 수는 없음.

* `int i = 34567;`로 하더라도, 컴퓨터는 2진수로 저장함.
    - `fprintf(fp, "%d\n", u);`
    - 텍스트 파일 IO 스트림: 34567이 문자로 저장됨.
    - 바이너리 파일 IO 스트림: 데이터 (바이너리) 자체를 저장함.

### 운영체제와 텍스트 파일
* 운영체제마다 인코딩 방식은 다름.
* 줄바꿈도 운영체제마다 다름.

### EOF도 운영체제마다 다르다.
- Linux는 EOF가 없음.
- 하지만 프로그램의 끝을 알도록 Linux가 도움줌.
- 바이너리에서도 저장할 땐, 데이터 그대로 정리되기보단 big endian, little endian 등으로 저장될 수 있음. (운영체제가 알아서 해줌)
