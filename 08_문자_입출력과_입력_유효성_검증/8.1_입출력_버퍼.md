# 8.1 입출력 버퍼

## 버퍼

- 입력을 받거나 출력을 할 때, 한꺼번에 모아서 입력/출력을 하면 효율성이 높음.

            int main()
            {
            char c;

                while ((c = getchar()) != '.')
                    putchar(c);

                return 0;

            }

- 위 코드를 보면 한 글자 씩 받고 넣는 것처럼 보이지만, 사실은 한 문장 씩 받는 것처럼 작동함.

<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter8/buffer2.png?raw=true">

- 상식적으로 생각해보면, 위 그림처럼 한 글자 입력하면 한 글자가 바로 나오는 게 직관적임.
  - 그러나 그렇지 않음.

<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter8/buffer1.png?raw=true">

- 위의 방식: A를 입력하면 A, B를 입력하면 B, C를 입력하면 C가 그 즉시 전송되어 출력됨.

- 아래 방식(버퍼)
  - 어떤 적당한 크기의 버퍼가 있다.
  - ABC를 입력하면 한 글자 씩 입력할 때마다 버퍼로 이동한다. (입출력 작업은 기본적으로 느림)
  - A 입력할 때 하나하나 보내는 방식은 느림. 이에 한 번에 처리하는 게 효율적임.
    - C언어 본색 버퍼 설명 기억.
  - 한 글자 씩 모았다가 때가 되었을 때 버퍼 내용 전체를 보냄.
    - 버퍼가 다 찼을 때. 사이즈는 효율적으로 움직이도록 미리 설정되어 있음.
      - 1. 마치 만원 버스와 유사한 방법. 버퍼가 다 차면 보내기.
      - 2. enter를 치면(`'\n'`) 버퍼가 찼든 안 찼든 보내는 방법

## 예시

- 윈도우에선 버퍼를 사용하지 않는 입력함수를 제공함. (`conio.h`, `_getch()`, `_getche()`);

  - 유닉스에서도 있지만 사용법이 까다로움.

          int main()
          {
              char c;

              while ((c = _getche()) != '.')
                  putchar(c);

              return 0;
          }

<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter8/buffer2.png?raw=true">

- 작동은 위 그림처럼 됨.

  - getch'e': e는 echo.
  - 나의 입력에 대한 메아리를 그려준다.

- `_getch()`의 경우

<img src="https://github.com/uber9ma/following_C/blob/master/images/chapter8/buffer3.png?raw=true">
